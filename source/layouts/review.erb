<% wrap_layout :layout do %>
  <section class="section section--padded">
    <header class="section__content section__content--slim">
      <div class="flytitle">
        <span class="flytitle__item">
          <%= titleize_category(current_article.data.category) %>
        </span>
      </div>

      <h1>
        <%= current_article.title %>
      </h1>

      <p class="fine-print">
        <%= reading_time_in_minutes(current_article.body) %> min read Â·

        <% date = Date.parse(current_article.data.publication_date).strftime("%-d&nbsp;%b&nbsp;%Y") %>
        <%= link_to(
          "published in #{current_article.data.publication} on&nbsp;#{date}",
          current_article.data.publication_url,
          class: "u-link--subtle",
        ) %>
      </p>
    </header>

  <% if current_article.data.path.present? %>
    <div class="section__content">
      <%= image_tag(
        featured_image_path(current_article),
        {alt: current_article.data.featured_image_description},
      ) %>
    </div>
  <% end %>

    <article class="section__content section__content--slim">
      <%= yield %>
    </article>

    <div class="section__content section__content--secondary">
      <dl class="review-metadata">
        <dt class="review-metadata__title">
          <%= current_article.title %>
        </dt>

        <% if current_article.data.writer %>
          <dd class="review-metadata__item">
            Written by <%= current_article.data.writer %>
          </dd>
        <% end %>

        <% if current_article.data.director %>
          <dd class="review-metadata__item">
            Directed by <%= current_article.data.director %>
          </dd>
        <% end %>

        <% if current_article.data.venue %>
          <dd class="review-metadata__item">
            Playing at <%= current_article.data.venue %>
          </dd>
        <% end %>

        <% if current_article.data.cast %>
          <dd class="review-metadata__item">
            With <%= current_article.data.cast %>
          </dd>
        <% end %>

        <% if current_article.data.running_time_in_minutes %>
          <dd class="review-metadata__item">
            <%= current_article.data.running_time_in_minutes.to_s %> min
          </dd>
        <% end %>

        <% if current_article.data.genre %>
          <dd class="review-metadata__item">
            <%= current_article.data.genre %>
          </dd>
        <% end %>
      </dl>
    </div>
  </section>
<% end %>
